# 4. UMASK 및 PATH 설정(v-sys-05-l)

## 가. 배경
1. UMASK 또는 사용자 파일 생성 모드는 새로 생성된 폴더 및 파일에 대한 기본 파일 권한 집합을 할당하는 데 사용되는 Linux 명령입니다. 마스크라는 용어는 새로 생성된 파일에 대해 해당 권한이 설정되는 방식을 각각 정의하는 권한 비트의 그룹화를 참조합니다. 마스크의 비트는 UMASK 명령을 호출하여 변경할 수 있습니다. 초기 UMASK 값은 0022로 설정됩니다.
클라이언트가 모든 새 파일 또는 폴더에 대한 기본 권한을 644 및 755로 설정하려고 한다고 가정합니다(기본적으로 Linux에서 파일에 대한 액세스 권한은 666이고 디렉토리에 대한 액세스 권한은 777임). 이는 다음 명령을 사용하여 달성할 수 있습니다.

```
[root@host ~]# umask 022
```

숫자 "2" 권한(쓰기 권한)은 시스템의 기본 권한인 666 및 777(따라서 "마스크"라는 이름)에서 "필터링"됩니다. 이제부터 시스템은 기본 권한인 644 및 755를 새 파일 및 디렉토리. 간단히 말해서 새 파일이나 디렉터리에 대한 권한 비트를 계산하려면 기본값에서 UMASK 값을 뺍니다. 예를 들어 666 - 022 = 644 및 777 - 022 = 755입니다.
2. $PATH 변수는 Linux가 명령을 실행할 때 실행 파일을 검색할 순서가 지정된 경로 목록을 포함하는 환경 변수입니다. 이러한 경로를 사용하면 명령을 실행할 때 절대 경로를 지정할 필요가 없습니다.
/bin, /usr/bin 및 /usr/local/bin 디렉토리는 일반적으로 대부분의 사용자의 $PATH 설정에 포함됩니다. 수퍼유저는 일반적으로 시스템 명령을 쉽게 실행하기 위한 /sbin 및 usr/sbin 항목을 가지고 있습니다. 현재 디렉터리(.)가 포함되는 경우가 있어 사용자가 현재 디렉터리에 있는 프로그램을 직접 실행할 수 있습니다. 일반적으로 시스템 관리자는 맬웨어에 의해 현재 디렉토리에 배치될 수 있는 스크립트의 우발적인 실행을 방지하기 위해 $PATH에 포함하지 않습니다.
UMASK가 필요한 이유는 모두가 자신이 만든 파일을 제한하기보다는 실행할 수 있기를 원하지만 매번 파일 권한을 변경해야 하기 때문에 상황에 맞게 기본 설정을 지정하려는 데서 발생합니다. 즉, 파일이나 디렉토리를 설정할 때마다 권한 값을 지정하는 번거로움 때문에 기본적으로 권한 값을 설정하기 위해 UMASK 명령어가 존재한다.
경로는 운영 체제가 명령줄이나 터미널 창에서 필요한 실행 파일을 찾기 위해 사용하는 시스템 변수이기 때문에 매우 중요한 경로입니다.


## 나. 학습 목표
시스템의 UMASK 및 PATH를 설정할 수 있습니다.

## 다. 설정 방법
- 기본 시스템 전체 $PATH 값은 /etc/profile 파일에 지정되며 각 사용자는 일반적으로 사용자의 $HOME/.profile 파일에 $PATH 값을 가집니다. .profile 파일의 $PATH 값은 시스템 전체 $PATH 값을 대체하거나 추가 디렉토리를 추가합니다.

## 라. 보안 위협
Linux 권한을 사용하면 파일 또는 디렉토리 소유자가 각 파일에 대한 액세스 권한을 제한할 수 있습니다. 이를 통해 서로 다른 클라이언트에 다양한 수준의 액세스를 제공하는 제어 체계가 가능합니다. UMASK 값이 올바르지 않으면 권한이 잘못된 파일이 생성될 수 있으며, 파일 및 디렉터리 생성 시 과도한 권한이 부여될 수 있습니다.
$PATH 환경 변수는 중요한 보안 제어입니다. 명령을 찾기 위해 검색할 디렉토리를 지정합니다. $PATH 환경 변수에 대한 무단 변경으로 인해 시스템의 사용자가 다른 사용자(루트 사용자 포함)를 "스푸핑"할 수 있습니다. 스푸핑 프로그램(트로이 목마 프로그램이라고도 함)은 시스템 명령을 대체한 다음 사용자 암호와 같은 해당 명령에 대한 정보를 캡처합니다.

## 마.실습 목표
권한을 결정하는 값인 UMASK는 시스템의 폴더나 파일에 부여됩니다. 루트 계정의 UMASK 및 $PATH 설정을 변경하십시오. UMASK 기본 시스템 설정을 000 미만의 027로 변경하고 $PATH 구성 폴더에서 ./ 폴더를 제거합니다.

## 바. 실습 환경

실습OS : 리눅스(CentOS)  
실습계정 : root/root123
> UID 확인 명령 : `id username`

## 사. 문제 풀이

### 1. `/etc/profile`의 `UMASK` 변경
```
[root@localhost ~]# vi /etc/profile
```

# 라인 64 UMASK 022 ~ 027을 편집하고 파일을 저장합니다.
  
### 2. `~/.bash_profile` 파일 수정
```
[root@localhost ~]# vi ~/.bash_profile
```

### 3. 변경된 설정 적용
```
[root@localhost ~]# source /etc/profile
```

### 4. 정답 확인
```
[root@localhost~]# check
‘umask 0027’ is correct answer
‘PATH setting’ is correct answer
correct!
```